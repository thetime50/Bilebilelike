webpackJsonp([0],{"7xrN":function(t,n){},PTm1:function(t,n){},RVVt:function(t,n){},qgXx:function(t,n){},"un+E":function(t,n){},zk75:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=e("Dd8w"),o=e.n(s),i=e("NYxO"),r=e("3Zko"),c=e("Gu7T"),a=e.n(c),u={name:"Nav",props:{nowIndex:{type:Number,default:0},cursorWidth:{type:Number,default:70},positionSync:{type:Number,default:0},routes:{type:Array,default:function(){return[]}}},data:function(){return{cursors:[],items:[],routesChange:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.refsRefres(),t._positionSync(t.positionSync)})},watch:{positionSync:function(t,n){this._positionSync(t)},routes:function(t,n){this.routesChange=!0}},computed:{},updated:function(){this.routesChange&&(this.refsRefres(),this.routesChange=!1)},methods:{tabClick:function(t){this.$router.replace(t.path)},_positionSync:function(t){this.items;for(var n=this.cursors,e=0;e<n.length;e++){var s=this.items[e].clientWidth,o=this.cursors[e].clientWidth;n[e].style.right=s*e+t*s+(s-o)/2+"px"}},refsRefres:function(){this.cursors=this.$refs.cursors?[].concat(a()(this.$refs.cursors)):[],this.items=this.$refs.items?[].concat(a()(this.$refs.items)):[]}}},l={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"component-nav"},[e("ul",{staticClass:"nav-list"},t._l(t.routes,function(n,s){return e("li",{key:s,ref:"items",refInFor:!0,staticClass:"item"},[e("div",{staticClass:"item-text",class:{active:t.nowIndex===s},on:{click:function(e){return t.tabClick(n)}}},[t._v("\r\n        "+t._s(n.text)+"\r\n      ")]),t._v(" "),e("div",{ref:"cursors",refInFor:!0,staticClass:"item-cursor",style:{width:t.cursorWidth+"%"}})])}),0)])},staticRenderFns:[]};var f=e("VU/8")(u,l,!1,function(t){e("7xrN")},null,null).exports,p=e("abJV"),h=e("InnB").a.setAttr2Def,d={autoPlay:!1,showDot:!1},v={name:"RouteScroll",components:{Slide:p.a},props:{routes:{type:Array,default:function(){return[]}},nav:{type:Object,default:function(){return f}},slideConf:{type:Object,default:function(){return{}}},scrollConf:{type:Object,default:function(){return{}}},_dummyNavPropsSync:{type:Function}},data:function(){return{positionSync:0,slideConfDt:{},scrollConfDt:{}}},created:function(){this.slideConfDt=h(this.slideConf,d),this.scrollConfDt=h(this.scrollConf,{probeType:3,stopPropagation:!1,click:!1,snap:{loop:!1,threshold:.3,speed:400}})},mounted:function(){var t=this;this.$nextTick(function(){t.slideBS.on("scrollEnd",function(){var n=t.slide.currentPageIndex;n!=t.currentIndex&&t.$router.replace(t.routes[n].path)}),t.slideBS.on("scroll",function(n){var e=n.x;n.y;t.positionSync=e/t.slide.pageWidth}),t.slide.toPage(t.currentIndex,0,0),t._triggerRouteChange(t.$route.path,"")})},watch:{currentIndex:function(t,n){this.slide.toPage(t)},"$route.path":function(t,n){this._triggerRouteChange(t,n)}},computed:{routeComponents:function(){var t=this,n=[];return this.routes.forEach(function(e){var s=t.$router.getMatchedComponents(e.path);n.push(s[s.length-1])}),n},currentIndex:function(){var t=0;for(t=0;t<this.routes.length;t++)if(this.routes[t].path===this.$route.path)return t},afterComponents:function(){return this.routeComponents.slice(0,this.currentIndex)},beforeComponents:function(){return this.routeComponents.slice(this.currentIndex+1)},slide:function(){return this.$refs.slide},slideBS:function(){return this.$refs.slide.slide}},methods:{_triggerRouteChange:function(t,n){var e=-1,s=-1;if(this.routes.forEach(function(o,i){var r;r=o.path,new RegExp("^"+n+"\\b").test(r)&&(e=i),function(n){return new RegExp("^"+t+"\\b").test(n)}(o.path)&&(s=i)}),e>=0){var o=this.slide.$children[e].routeChange;o&&o({type:"leave ",before:t,after:n})}if(s>=0){var i=this.slide.$children[s].routeChange;i&&i({type:"enter",before:t,after:n})}}}},y={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"component-route-scroll"},[e("div",{staticClass:"nav"},[e(t.nav,{tag:"component",attrs:{nowIndex:t.currentIndex,positionSync:t.positionSync,routes:t.routes,_propsSync:t._dummyNavPropsSync}})],1),t._v(" "),e("div",{staticClass:"route-scroll-slide"},[e("slide",{ref:"slide",attrs:{slideConf:t.slideConfDt,scrollConf:t.scrollConfDt}},[t._l(t.afterComponents,function(t,n){return e(t,{key:n,tag:"component"})}),t._v(" "),e("router-view",{key:t.currentIndex}),t._v(" "),t._l(t.beforeComponents,function(n,s){return e(n,{key:s+t.currentIndex+1,tag:"component"})})],2)],1)])},staticRenderFns:[]};var m=e("VU/8")(v,y,!1,function(t){e("RVVt")},null,null).exports,_={name:"DummyNav",props:{nowIndex:{type:Number,default:0},cursorWidth:{type:Number,default:70},positionSync:{type:Number,default:0},routes:{type:Array,default:function(){return[]}},styles:{type:Object,default:function(){return{"component-dummy-nav":"component-nav"}}},_propsSync:{type:Function}},data:function(){return{}},mounted:function(){this._propsSync({nav_nowIndex:this.nowIndex,nav_cursorWidth:this.cursorWidth,nav_positionSync:this.positionSync,nav_routes:this.routes}),this._propsSync({nav_enable:!0})},beforeDestroy:function(){this._propsSync({nav_enable:!1}),this._propsSync({nav_rou1s:[]})},watch:{nowIndex:function(t,n){this._propsSync({nav_nowIndex:t})},cursorWidth:function(t,n){this._propsSync({nav_cursorWidth:t})},positionSync:function(t,n){this._propsSync({nav_positionSync:t})},routes:function(t,n){this._propsSync({nav_routes:t})}},computed:{},methods:{}},C={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"component-dummy-nav",class:this.styles["component-dummy-nav"]},[n("ul",{staticClass:"nav-list",class:this.styles["nav-list"]},[n("li",{staticClass:"item",class:this.styles.item},[n("div",{staticClass:"item-text",class:this.styles["item-text"]}),this._v(" "),n("div",{staticClass:"item-cursor",class:this.styles["item-cursor"]})])])])},staticRenderFns:[]};var x=e("VU/8")(_,C,!1,function(t){e("PTm1")},null,null).exports,g=e("GQaK"),S={name:"StickyScroll",data:function(){return{}},mounted:function(){var t=this;this._interval=setInterval(function(){t.$refs["sticky-scroll-scroll-container"].innerHTML.length>100&&(clearInterval(t._interval),t.scroll=new g.a(t.$refs["sticky-scroll-scroll-container"],{click:!0,bounce:!1,bindToWrapper:!0,probeType:3}),t.scroll.on("scroll",function(n){n.x;var e=n.y;t.stickyTopRefresh(e)}),t.stickyTopRefresh(0))},10)},methods:{stickyTopRefresh:function(t){var n=this.$refs["sticky-scroll-sticky"],e=n.children[0].offsetTop;n.style.top=e+t>0?t+"px":-e+"px"}}},k={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"component-sticky-scroll"},[n("div",{ref:"sticky-scroll-scroll-container",staticClass:"sticky-scroll-scroll-container"},[n("div",{staticClass:"sticky-scroll-scroll"},[this._t("default")],2)]),this._v(" "),n("div",{ref:"sticky-scroll-sticky",staticClass:"sticky-scroll-sticky"},[this._t("sticky")],2)])},staticRenderFns:[]};var b=e("VU/8")(S,k,!1,function(t){e("qgXx")},null,null).exports,I=[{text:"直播",path:"/mainpage/zhibo"},{text:"推荐",path:"/mainpage/tuijian"},{text:"热门",path:"/mainpage/remen"},{text:"追番",path:"/mainpage/zhuifan"},{text:"影视",path:"/mainpage/yingshi"}],$={name:"MainPage",components:{HeaderTop:r.a,RouteScroll:m,NavList:f,StickyScroll:b},data:function(){return{routes:I,nav:x}},computed:o()({},Object(i.e)("navState",["nav_enable","nav_nowIndex","nav_cursorWidth","nav_positionSync","nav_routes"])),methods:o()({},Object(i.d)("navState",["set_nav_state"]))},w={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"component-main-page"},[e("StickyScroll",{scopedSlots:t._u([{key:"sticky",fn:function(){return[e("div",{staticClass:"main-page-nav-list"},[t.nav_enable?e("NavList",{attrs:{nowIndex:t.nav_nowIndex,cursorWidth:t.nav_cursorWidth,positionSync:t.nav_positionSync,routes:t.nav_routes}}):t._e()],1)]},proxy:!0}])},[t._v(" "),[e("header-top",{attrs:{"left-icon-type":"leftMenu"}},[[e("div",{staticClass:"heater-v-slot"},[e("router-link",{staticClass:"m-search",attrs:{to:{path:"/search",query:{page:"MainPage"}}}},[e("div",{staticClass:"search-back-div"},[e("i",{staticClass:"iconfont icon-sousuo"})])]),t._v(" "),e("router-link",{staticClass:"m-game",attrs:{to:"/game"}},[e("i",{staticClass:"iconfont icon-youxifull"})]),t._v(" "),e("router-link",{staticClass:"m-offline-cache",attrs:{to:"/offlinecache"}},[e("i",{staticClass:"iconfont icon-xiazai"})]),t._v(" "),e("router-link",{staticClass:"m-message",attrs:{to:"/message"}},[e("i",{staticClass:"iconfont icon-xiaoxi"})])],1)]],2),t._v(" "),e("route-scroll",{attrs:{routes:t.routes,nav:t.nav,_dummyNavPropsSync:t.set_nav_state}})]],2)],1)},staticRenderFns:[]};var R=e("VU/8")($,w,!1,function(t){e("un+E")},null,null);n.default=R.exports}});
//# sourceMappingURL=0.88f591a32fafe3423e5c.js.map