webpackJsonp([2],{Fr66:function(e,t){},Hhiv:function(e,t){},T5fb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("WEwA"),a={name:"CameraUpdata",props:{videoConf:{default:!0}},data:function(){return{vobjClientWidth:0,vobjClientHeight:0}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.myCanvas.getContext("2d");var t=e.$refs.myVideo;e.getUserMedia({video:e.videoConf},function(e){t.src=e,t.play()},function(){}),window.addEventListener("resize",function(){e._vobjClientWidth(),e._vobjClientHeight()}),e._vobjClientWidth(),e._vobjClientHeight()})},methods:{getUserMedia:function(e,t,n){var i=function(){};if(navigator.getUserMedia)i=function(e,t,n){navigator.getUserMedia(e,function(e){t(window.URL.createObjectURL(e))},n)};else if(navigator.webkitGetUserMedia)i=function(e,t,n){navigator.webkitGetUserMedia(e,function(e){var n=window.URL||window.webkitURL;t(n.createObjectURL(e))},n)};else{if(!navigator.mozGetUserMedia)return!1;i=function(e,t,n){navigator.mozGetUserMedia(e,function(e){t(window.URL.createObjectURL(e))},n)}}return i(e,t,n)},paishe:function(){var e=this.$refs.myCanvas.getContext("2d"),t=this.$refs.myVideo;e.drawImage(t,0,0,this.vobjClientWidth,this.vobjClientHeight),this.$refs.myButton3.children[0].href=e.canvas.toDataURL("image/png")},yulan:function(){var e=this.$refs.myCanvas.getContext("2d");window.open(e.canvas.toDataURL("image/png"),"_blank")},_vobjClientWidth:function(){this.vobjClientWidth=this.$refs.myVideo.clientWidth},_vobjClientHeight:function(){this.vobjClientHeight=this.$refs.myVideo.clientHeight}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-camera-updata"},[n("video",{ref:"myVideo",attrs:{width:"85%",id:"myVideo"}}),e._v(" "),n("div",[n("button",{attrs:{id:"myButton"},on:{click:e.paishe}},[e._v("拍摄")]),e._v(" "),n("button",{attrs:{id:"myButton2"},on:{click:e.yulan}},[e._v("预览")]),e._v(" "),n("button",{ref:"myButton3",attrs:{id:"myButton3"}},[n("a",{attrs:{download:"video.png"}},[e._v("另存为")])])]),e._v(" "),n("canvas",{ref:"myCanvas",attrs:{width:e.vobjClientWidth,height:e.vobjClientHeight,id:"myCanvas"}})])},staticRenderFns:[]};var r={name:"CameraUpdata",props:{videoConf:{default:!0}},data:function(){return{}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.canvas.getContext("2d");var t=e.$refs.video,n={video:e.videoConf},i=function(e){console.log("Video capture error: ",e.code)};navigator.getUserMedia?navigator.getUserMedia(n,function(e){t.src=window.URL.createObjectURL(e),t.play()},i):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(n,function(e){t.src=window.webkitURL.createObjectURL(e),t.play()},i):navigator.mozGetUserMedia?navigator.mozGetUserMedia(n,function(e){t.src=window.URL.createObjectURL(e),t.play()},i):alert("浏览器不支持HTML5！")})},methods:{paizhao:function(){var e=this.$refs.video;this.$refs.canvas.getContext("2d").drawImage(e,0,0,e.clientWidth,e.clientHeight)}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"component-camera-updata"},[n("div",{attrs:{id:"camera"}},[n("div",{attrs:{id:"contentHolder"}},[n("video",{ref:"video",attrs:{id:"video",width:"85%",autoplay:""}}),e._v(" "),n("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{id:"canvas",width:"640",height:"480"}})]),e._v(" "),n("div",{attrs:{id:"buttons"}},[n("button",{staticClass:"btn btn_blue",attrs:{id:"btn_snap"},on:{click:e.paizhao}},[e._v("拍照")]),e._v(" "),n("button",{staticClass:"btn btn_blue",staticStyle:{display:"none"},attrs:{id:"btn_cancel"}},[e._v("取消")]),e._v(" "),n("button",{staticClass:"btn btn_green",staticStyle:{display:"none"},attrs:{id:"btn_upload"}},[e._v("上传")])])])])},staticRenderFns:[]};var c={name:"CameraWebrtc",props:{videoConf:{default:!0}},data:function(){return{}},mounted:function(){var e=this;this.$nextTick(function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,console.log(),navigator.getUserMedia({video:e.videoConf,audio:!1},function(t){e.$refs.iv.srcObject=t},console.log)})}},d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"component-camera-webrtc"},[t("video",{ref:"iv",staticStyle:{width:"85%"},attrs:{src:"",id:"iv",autoplay:"autoplay"}})])},staticRenderFns:[]};var v={"camera-save":n("VU/8")(a,o,!1,function(e){n("Hhiv")},null,null).exports,"camera-updata":n("VU/8")(r,s,!1,function(e){n("enyO")},null,null).exports,"camera-webrtc":n("VU/8")(c,d,!1,function(e){n("mABd")},null,null).exports},l={"video : true":!0,'video : { facingMode:"user" }':{facingMode:"user"},'video : { facingMode:{exact:"environment"} }':{facingMode:{exact:"environment"}}},u={name:"Shop",components:{TestHeaderTop:i.a},data:function(){return{selected:"camera-save",Cameras:v,VCSelected:"video : true",videoConfs:l}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-shop"},[n("test-header-top",{attrs:{"left-icon-type":"leftMenu"},scopedSlots:e._u([{key:"centerContent",fn:function(){return[n("div",{staticClass:"header-slot-cc"},[n("p",[e._v("会员购")])])]},proxy:!0},{key:"rightContent",fn:function(){return[n("div",{staticClass:"header-slot-rc"},[n("span",{staticClass:"m-gouwuche"},[n("i",{staticClass:"iconfont icon-gouwuche"})]),e._v(" "),n("span",{staticClass:"m-gouwuxinxi"},[n("i",{staticClass:"iconfont icon-gouwuxinxi"})])])]},proxy:!0}])}),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"selected"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selected=t.target.multiple?n:n[0]}}},e._l(e.Cameras,function(t,i){return n("option",{key:i},[e._v(e._s(i))])}),0),e._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.VCSelected,expression:"VCSelected"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.VCSelected=t.target.multiple?n:n[0]}}},e._l(e.videoConfs,function(t,i){return n("option",{key:i},[e._v(e._s(i))])}),0),e._v(" "),n("br"),e._v(" "),n(e.Cameras[e.selected],{key:e.VCSelected,tag:"component",attrs:{videoConf:e.videoConfs[e.VCSelected]}}),e._v("\n  Shop\n")],1)},staticRenderFns:[]};var m=n("VU/8")(u,f,!1,function(e){n("Fr66")},null,null);t.default=m.exports},enyO:function(e,t){},mABd:function(e,t){}});
//# sourceMappingURL=2.d8ff7b8be5e5357a36a8.js.map