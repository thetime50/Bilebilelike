webpackJsonp([2],{"3HWI":function(t,e){},Q9WK:function(t,e){},SYAh:function(t,e){},T5fb:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("WEwA"),a={name:"CameraUpdata",props:{videoConf:{default:!0}},data:function(){return{vobjClientWidth:0,vobjClientHeight:0}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.myCanvas.getContext("2d");var e=t.$refs.myVideo;t.getUserMedia({video:t.videoConf},function(t){e.src=t,e.play()},function(){}),window.addEventListener("resize",function(){t._vobjClientWidth(),t._vobjClientHeight()}),t._vobjClientWidth(),t._vobjClientHeight()})},methods:{getUserMedia:function(t,e,n){var i=function(){};if(navigator.getUserMedia)i=function(t,e,n){navigator.getUserMedia(t,function(t){e(window.URL.createObjectURL(t))},n)};else if(navigator.webkitGetUserMedia)i=function(t,e,n){navigator.webkitGetUserMedia(t,function(t){var n=window.URL||window.webkitURL;e(n.createObjectURL(t))},n)};else{if(!navigator.mozGetUserMedia)return!1;i=function(t,e,n){navigator.mozGetUserMedia(t,function(t){e(window.URL.createObjectURL(t))},n)}}return i(t,e,n)},paishe:function(){var t=this.$refs.myCanvas.getContext("2d"),e=this.$refs.myVideo;t.drawImage(e,0,0,this.vobjClientWidth,this.vobjClientHeight),this.$refs.myButton3.children[0].href=t.canvas.toDataURL("image/png")},yulan:function(){var t=this.$refs.myCanvas.getContext("2d");window.open(t.canvas.toDataURL("image/png"),"_blank")},_vobjClientWidth:function(){this.vobjClientWidth=this.$refs.myVideo.clientWidth},_vobjClientHeight:function(){this.vobjClientHeight=this.$refs.myVideo.clientHeight}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-camera-updata"},[n("video",{ref:"myVideo",attrs:{width:"85%",id:"myVideo"}}),t._v(" "),n("div",[n("button",{attrs:{id:"myButton"},on:{click:t.paishe}},[t._v("拍摄")]),t._v(" "),n("button",{attrs:{id:"myButton2"},on:{click:t.yulan}},[t._v("预览")]),t._v(" "),n("button",{ref:"myButton3",attrs:{id:"myButton3"}},[n("a",{attrs:{download:"video.png"}},[t._v("另存为")])])]),t._v(" "),n("canvas",{ref:"myCanvas",attrs:{width:t.vobjClientWidth,height:t.vobjClientHeight,id:"myCanvas"}})])},staticRenderFns:[]};var r={name:"CameraUpdata",props:{videoConf:{default:!0}},data:function(){return{}},mounted:function(){var t=this;this.$nextTick(function(){t.$refs.canvas.getContext("2d");var e=t.$refs.video,n={video:t.videoConf},i=function(t){console.log("Video capture error: ",t.code)};navigator.getUserMedia?navigator.getUserMedia(n,function(t){e.src=window.URL.createObjectURL(t),e.play()},i):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(n,function(t){e.src=window.webkitURL.createObjectURL(t),e.play()},i):navigator.mozGetUserMedia?navigator.mozGetUserMedia(n,function(t){e.src=window.URL.createObjectURL(t),e.play()},i):alert("浏览器不支持HTML5！")})},methods:{paizhao:function(){var t=this.$refs.video;this.$refs.canvas.getContext("2d").drawImage(t,0,0,t.clientWidth,t.clientHeight)}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-camera-updata"},[n("div",{attrs:{id:"camera"}},[n("div",{attrs:{id:"contentHolder"}},[n("video",{ref:"video",attrs:{id:"video",width:"85%",autoplay:""}}),t._v(" "),n("canvas",{ref:"canvas",staticStyle:{display:"none"},attrs:{id:"canvas",width:"640",height:"480"}})]),t._v(" "),n("div",{attrs:{id:"buttons"}},[n("button",{staticClass:"btn btn_blue",attrs:{id:"btn_snap"},on:{click:t.paizhao}},[t._v("拍照")]),t._v(" "),n("button",{staticClass:"btn btn_blue",staticStyle:{display:"none"},attrs:{id:"btn_cancel"}},[t._v("取消")]),t._v(" "),n("button",{staticClass:"btn btn_green",staticStyle:{display:"none"},attrs:{id:"btn_upload"}},[t._v("上传")])])])])},staticRenderFns:[]};var c={name:"CameraWebrtc",props:{videoConf:{default:!0}},data:function(){return{}},mounted:function(){var t=this;this.$nextTick(function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,console.log(),navigator.getUserMedia({video:t.videoConf,audio:!1},function(e){t.$refs.iv.srcObject=e},console.log)})}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"component-camera-webrtc"},[e("video",{ref:"iv",staticStyle:{width:"85%"},attrs:{src:"",id:"iv",autoplay:"autoplay"}})])},staticRenderFns:[]};var v={"camera-save":n("C7Lr")(a,o,!1,function(t){n("SYAh")},null,null).exports,"camera-updata":n("C7Lr")(r,s,!1,function(t){n("hAti")},null,null).exports,"camera-webrtc":n("C7Lr")(c,d,!1,function(t){n("3HWI")},null,null).exports},l={"video : true":!0,'video : { facingMode:"user" }':{facingMode:"user"},'video : { facingMode:{exact:"environment"} }':{facingMode:{exact:"environment"}}},u={name:"Shop",components:{TestHeaderTop:i.a},data:function(){return{selected:"camera-save",Cameras:v,VCSelected:"video : true",videoConfs:l}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-shop"},[n("test-header-top",{attrs:{"left-icon-type":"leftMenu"},scopedSlots:t._u([{key:"centerContent",fn:function(){return[n("div",{staticClass:"header-slot-cc"},[n("p",[t._v("会员购")])])]},proxy:!0},{key:"rightContent",fn:function(){return[n("div",{staticClass:"header-slot-rc"},[n("span",{staticClass:"m-gouwuche"},[n("i",{staticClass:"iconfont icon-gouwuche"})]),t._v(" "),n("span",{staticClass:"m-gouwuxinxi"},[n("i",{staticClass:"iconfont icon-gouwuxinxi"})])])]},proxy:!0}])}),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"selected"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected=e.target.multiple?n:n[0]}}},t._l(t.Cameras,function(e,i){return n("option",{key:i},[t._v(t._s(i))])}),0),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.VCSelected,expression:"VCSelected"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.VCSelected=e.target.multiple?n:n[0]}}},t._l(t.videoConfs,function(e,i){return n("option",{key:i},[t._v(t._s(i))])}),0),t._v(" "),n("br"),t._v(" "),n(t.Cameras[t.selected],{key:t.VCSelected,tag:"component",attrs:{videoConf:t.videoConfs[t.VCSelected]}}),t._v("\n  Shop\n")],1)},staticRenderFns:[]};var m=n("C7Lr")(u,f,!1,function(t){n("Q9WK")},null,null);e.default=m.exports},hAti:function(t,e){}});
//# sourceMappingURL=2.760e5460b9271bba59b7.js.map